<meta charset="UTF-8">
<html>

<head>
	<title>oxDNA three.js viewer</title>

	<!--http://google.github.io/material-design-icons/-->
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
	  rel="stylesheet">

	<style>
		/*CSS*/

		body {
			padding: 0;
			margin: 0;
			overflow: hidden;
		}
		canvas {
			position: absolute;
			height: 100%;
		}
		.opts {
			width: 200px;
			position: fixed;
			bottom: 0px;
			z-index: 1;
			background-color: #eee;
			padding: 2px;
		}

		.sidenav { /*side bar settings*/
			width: 200px;
			max-height: 100%;
			position: fixed;
			z-index: 1;
			font-size: 12px;
			right: 0;
			text-align: left;
			overflow-y: scroll;
			background-color: rgba(252, 249, 249, 0.9);
			opacity: 0.95;
			padding: 2px;
		}

		.tab { /*tab settings*/
			overflow: auto;
			border: 1px thin #ccc;
			background-color: #acc;
		}

		.tab button {
			margin: 2px;
			background-color: inherit;
			border: none;
			cursor: pointer;
			padding: 5px; /*on each side of button*/
			transition: 0.3s;
			font-size: 1em;
			float: left;
			width: auto;
		}

		.tab button:hover {
			background-color: azure;
			color: #555;
		}

		.tab button.active {
			background-color: azure;
			font-size: 1.1em;
			color: #555;
		}

		textarea {
			width: 100%;
			max-width: 100%;
			min-width: 100%;
			overflow-y: scroll;
			font-size: 12px;
		}

		button {
			width: 100%;
			background-color: #acc;
			border: none;
			color: #fff;
			font-size: 1em;
			padding: 5px 15px;
			margin-top: 1px;
			margin-bottom: 1px;
			text-transform: uppercase;
			font-weight: bold;
		}

		fieldset {
			margin: 5px 0px;
			min-width: 0;
			background-color: rgba(170, 204, 204, 0.3);
			border: none;
			font-size: 1em;
			font-weight: normal;
		}

		legend {
			padding: 2px 20px;
			margin: 1px;
			background-color: rgb(222, 233, 233);
			width: auto;
			border-radius: 2px;
			margin-left: auto;
			margin-right: auto;
		}

		button:hover {
			background-color: rgb(143, 199, 199);
			cursor: pointer;
		}

		input[type=number] {
			width: 4em;
		}

		.material-icons:hover{
			color: rgb(65, 114, 179);
			cursor: pointer;
		}

		#dragInstruction {
			position: fixed;
			z-index: 1;
			left: 0;
			right: 200;
			padding: 0.5em;
			background-color: #acc;
			opacity: 0.8;
			text-align: center;
			color: #fff;
			font-family: Arial, serif;
			font-size: 1.5em;
			font-weight: bold;
		}

	</style>
    </head>

<body>
	<div id="dragInstruction">Drag and drop oxDNA .conf and .top files below</div>
	<div class="sidenav">
		<!--sidebar-->
		<div class="tab">
			<!--2 tabs: Nucleotides. Strands(not used)-->
			<button class="tablinks active" onclick="openTab(event, 'Nucleotides')">Bases</button>
			<button class="tablinks" onclick="openTab(event, 'Strands')">Strands</button>
		</div>
		<div id="Nucleotides" class="tabcontent">
			<textarea id="BaseList" cols="25" rows="3" name="textarea" readonly> Selected Bases List </textarea>
			<button onclick="makeSelectedBasesFile()" type="button" title="Download plain-text file of selected bases">Download Selected Base List</button>
			<button onclick="makeMutualTrapFile()" type="button" title="Create mutual trap file pairing every two bases in the selected base list">Make Mutual Trap File</button>
			<button onclick="makeOutputFiles()" type="button" title="Download the current scene in oxDNA format">Download Output Files<br>(.dat and .top)</button>
			<button onclick="toggleVideoOptions()" type="button" title="Create a video of the trajectory starting with the current frame">Create Video</button>
			<fieldset>
				<legend>PBC / Centering</legend>
				<caption> PBC: </caption>
				<select id="inboxing" title="At what scale to apply periodic boundary conditions">
					<option>Monomer</option>
					<option>Strand</option>
					<option>None</option>
				</select>
				<br>
				<caption>Centering:</caption>
				<select id="centering" title="Where to center the structure relative to the simulation box">
					<option>Origin</option>
					<option>Box Center</option>
					<option>None</option>
				</select>
				<br>
				<button onclick="systems.forEach( (s) => { PBC_switchbox(s)}); render()" type="button" title="note this only works if you're going from none to something else or if you want to re-center after moving">Apply</button>
			</fieldset>
			<!--<input type="checkbox" id="centering" onchange="centerSystems()" checked>Center Systems-->
			<fieldset>
				<legend>View</legend>
				<input type="checkbox" id="arrowToggle" onchange="toggleArrows(this)" title="Show/hide the coordinate axes" checked>Display Arrows<br>
				<input type="checkbox" id="lutToggle" onchange="toggleLut(this)" title="If colormap is applied, return to default coloring">Display Alternate Colors<br>
				<input type="checkbox" id="backgroundToggle" onchange="toggleBackground()" title="White or black background?">Toggle Background Color<br>
				<button onclick="toggleColorOptions()" type="button" title="modify the default strand colors">Edit Colors</button>
				<button onclick="controls.reset()" type="button" title="moves camera to default position (100,0,0)">Reset Camera</button>
			</fieldset>
			<fieldset>
				<legend>Edit</legend>
				<div style="text-align: center;">
					<i class="material-icons" onclick="editHistory.undo()" title="Undo edit (ctrl-z)">undo</i>
					<i class="material-icons" onclick="editHistory.redo()" title="Redo edit (ctrl-shift-z)">redo</i>
				</div>
				<input type="checkbox" name="action" id="selectToggle" value="Select" checked title="Hold down ctrl for multiple selection"> Select
				<input type="checkbox" name="action" id="dragToggle"value="Drag" onchange="drag()"> Drag<br>
				<fieldset>
					<legend>Selection mode:</legend>
					<input type="radio" name="scope" value="Monomer"  checked>Monomer<br> <!--default mode is Nucleotide-->
					<input type="radio" name="scope" value="Strand">Strand<br>
					<input type="radio" name="scope" value="System">System<br>
					<input type="radio" name="scope" value="Cluster" title="on first click performs DBSCAN to determine clusters">Cluster
				</fieldset>
				<fieldset>
					<legend>Rotate:</legend>
					Axis:
					<input type="radio" name="rotate" value="X" checked>X <!--default checked is x-axis-->
					<input type="radio" name="rotate" value="Y">Y
					<input type="radio" name="rotate" value="Z">Z<br>
					Rotation angle:
					<input type="number" value="-90" id="rotAngle" width="20">
					<button onclick="rotateByInput()" title="rotate selected objects around center of mass specified by the selection mode by the rotation angle">Rotate</button>
				</fieldset>
			</fieldset>
			<textarea id="BaseInfo" cols="25" rows="10" name="textarea" readonly> Selected Base Information </textarea>
			<div style="text-align: center;">
				<i class="material-icons" onclick="previousConfig()" style="font-size: 48px;" title="Previous config (left keyboard arrow)">keyboard_arrow_left</i>
				<i class="material-icons" onclick="nextConfig()" style="font-size: 48px;" title="Next config (right keyboard arrow)">keyboard_arrow_right</i>
			</div>
			</div>
			<div id="Strands" class="tabcontent" style="display: none">
				<button>TEST</button>
			</div>
			<button onclick="toggleSideNav(this)"type="button" style="background-color: #acc; border: 0px; height: 20px; padding: 0px;">hide</button>
		</div>
		<div class="opts" id="videoOptions" hidden="hidden">
			Video type
			<select id="videoType">
				<option value="trajectory">Trajectory</option>
				<option value="lemniscate">XY leminiscate</option>
			</select>
			<fieldset>
				<legend>File format:</legend>
				<input type="radio" name="videoFormat" value="webm" checked>webm<br>
				<input type="radio" name="videoFormat" value="gif" >gif<br>
				<input type="radio" name="videoFormat" value="png" >png<br>
				<input type="radio" name="videoFormat" value="jpg" >jpg<br>
			</fieldset>
			<input type="number" value="24" id="videoFramerate" width="20">framerate
			<button id="videoStartStop" onclick="createVideo()">Start</button>
		</div>
		<div title="Click a color to edit, right click to remove" class="opts"
			id="colorOptions" hidden="hidden" style="background-color: transparent">
		</div>
		<canvas id="threeCanvas"></canvas>
		<div class="main"> <!--all files to be loaded onload of html file-->
			<script src="./ts/lib/CCapture.all.min.js"></script>
			<script src="./ts/lib/three.js"></script>
			<script src="./ts/lib/Lut.js"></script>
			<script src="./ts/controls/DragControls.js"></script>
			<script src="./ts/controls/TrackballControls.js"></script>
			<script src="./dist/scene_setup.js"></script>
			<script src="./dist/instancing.js"></script>
			<script src="./dist/mesh_setup.js"></script>
			<script src="./dist/io.js"></script>
			<script src="./dist/PBC_switchbox.js"></script>
			<script src="./dist/file_reading.js"></script>
			<script src="./dist/doUndo.js"></script>
			<script src="./dist/main.js"></script>
			<script src="./dist/keybindings.js"></script>
			<script src="./dist/base_selector.js"></script>
			<script src="./dist/output_file.js"></script>
			<script src="./dist/translation.js"></script>
			<script src="./ts/controls/SceneUtils.js"></script>
			<script src="./dist/adhoc_api.js"></script>
		</div>

</body>

</html>
